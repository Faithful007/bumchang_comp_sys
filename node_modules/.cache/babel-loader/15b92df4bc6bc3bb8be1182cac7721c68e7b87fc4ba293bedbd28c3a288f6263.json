{"ast":null,"code":"// BEFORE:\n// import {\n//   getDesignConditionsStrings,\n//   SUPPORTED_LANGS,\n//   LANGUAGE_LABELS\n// } from \"../../i18n/designConditionsStrings\";\n\n// AFTER:\nimport { getModuleStrings, SUPPORTED_LANGS, LANGUAGE_LABELS } from \"../../i18n/appStrings\";\nimport { useLanguage } from \"../../i18n/LanguageContext\";\n\n// // src/modules/designConditions/DesignConditionsForm.jsx\n// import React, { useState } from \"react\";\n// import {\n//   computeDirectionStats,\n//   estimateTrafficVolume,\n//   SPEED_CAPACITY_TABLE\n// } from \"./calculations\";\n// import {\n//   getDesignConditionsStrings,\n//   SUPPORTED_LANGS,\n//   LANGUAGE_LABELS\n// } from \"../../i18n/designConditionsStrings\";\n\n// const EMPTY_SEGMENT = {\n//   slopePercent: \"\",\n//   lengthM: \"\",\n//   avgElevationM: \"\",\n//   laneCount: \"\"\n// };\n\n// const SEGMENT_COUNT_PER_DIR = 10;\n\n// // Excel-style mapping: IF(V=120,0.1, IF(V=100,0.2, IF(V=80,0.3)))\n// function defaultApplyCodeForSpeed(speed) {\n//   if (speed === 120) return 0.1;\n//   if (speed === 100) return 0.2;\n//   if (speed === 80) return 0.3;\n//   return 0.3;\n// }\n\n// export default function DesignConditionsForm() {\n//   // UI language\n//   const [lang, setLang] = useState(\"en\");\n//   const t = getDesignConditionsStrings(lang);\n\n//   // 10 segments per direction\n//   const [segmentsMasanToJinju, setSegmentsMasanToJinju] = useState(\n//     Array.from({ length: SEGMENT_COUNT_PER_DIR }, () => ({ ...EMPTY_SEGMENT }))\n//   );\n//   const [segmentsJinjuToMasan, setSegmentsJinjuToMasan] = useState(\n//     Array.from({ length: SEGMENT_COUNT_PER_DIR }, () => ({ ...EMPTY_SEGMENT }))\n//   );\n\n//   // Global design inputs\n//   const [designInputs, setDesignInputs] = useState({\n//     designSpeedKmH: 80,\n//     applyCode: defaultApplyCodeForSpeed(80),\n//     capacityUsageRatio: defaultApplyCodeForSpeed(80),\n//     serviceLevelCode: \"D\",\n//     peakTrafficJinju: 2200,\n//     peakTrafficMasan: 2200\n//   });\n\n//   const handleSegmentChange = (dir, index, field, value) => {\n//     const [segments, setter] =\n//       dir === \"MasanToJinju\"\n//         ? [segmentsMasanToJinju, setSegmentsMasanToJinju]\n//         : [segmentsJinjuToMasan, setSegmentsJinjuToMasan];\n\n//     const next = segments.map((seg, i) =>\n//       i === index ? { ...seg, [field]: value } : seg\n//     );\n//     setter(next);\n//   };\n\n//   const handleDesignSpeedChange = (speed) => {\n//     const s = Number(speed);\n//     const code = defaultApplyCodeForSpeed(s);\n//     setDesignInputs((prev) => ({\n//       ...prev,\n//       designSpeedKmH: s,\n//       applyCode: code,\n//       capacityUsageRatio: code\n//     }));\n//   };\n\n//   const handleDesignInputChange = (field, value) => {\n//     setDesignInputs((prev) => ({ ...prev, [field]: value }));\n//   };\n\n//   // ---- Calculations per direction ----\n//   const statsMasanToJinju = computeDirectionStats(segmentsMasanToJinju);\n//   const statsJinjuToMasan = computeDirectionStats(segmentsJinjuToMasan);\n\n//   const trafficMasanToJinju = estimateTrafficVolume({\n//     designSpeedKmH: designInputs.designSpeedKmH,\n//     capacityUsageRatio: designInputs.capacityUsageRatio,\n//     lanes: statsMasanToJinju.lanes\n//   });\n\n//   const trafficJinjuToMasan = estimateTrafficVolume({\n//     designSpeedKmH: designInputs.designSpeedKmH,\n//     capacityUsageRatio: designInputs.capacityUsageRatio,\n//     lanes: statsJinjuToMasan.lanes\n//   });\n\n//   const baseCap = SPEED_CAPACITY_TABLE[designInputs.designSpeedKmH];\n\n//   return (\n//     <div style={{ padding: 20, fontFamily: \"sans-serif\" }}>\n//       {/* Header: title left, language selector right */}\n//       <div\n//         style={{\n//           display: \"flex\",\n//           justifyContent: \"space-between\",\n//           alignItems: \"center\",\n//           marginBottom: 16\n//         }}\n//       >\n//         <h1 style={{ margin: 0, fontSize: 20 }}>{t.moduleTitle}</h1>\n\n//         <div style={{ minWidth: 200, textAlign: \"right\" }}>\n//           <label\n//             style={{\n//               ...fieldLabel,\n//               display: \"block\",\n//               marginBottom: 4,\n//               textAlign: \"right\"\n//             }}\n//           >\n//             {t.languageLabel}\n//           </label>\n//           <select\n//             value={lang}\n//             onChange={(e) => setLang(e.target.value)}\n//             style={controlStyle}\n//           >\n//             {SUPPORTED_LANGS.map((code) => (\n//               <option key={code} value={code}>\n//                 {LANGUAGE_LABELS[code] || code}\n//               </option>\n//             ))}\n//           </select>\n//         </div>\n//       </div>\n\n//       {/* === GLOBAL DESIGN INPUTS === */}\n//       <section style={cardStyle}>\n//         <h2>{t.globalTitle}</h2>\n\n//         {/* 4-column grid for standard fields */}\n//         <div style={gridGlobal}>\n//           <div style={fieldWrapper}>\n//             <label style={fieldLabel}>{t.designSpeed}</label>\n//             <select\n//               value={designInputs.designSpeedKmH}\n//               onChange={(e) => handleDesignSpeedChange(Number(e.target.value))}\n//               style={controlStyle}\n//             >\n//               {Object.keys(SPEED_CAPACITY_TABLE).map((v) => (\n//                 <option key={v} value={v}>\n//                   {v}\n//                 </option>\n//               ))}\n//             </select>\n//           </div>\n\n//           <div style={fieldWrapper}>\n//             <label style={fieldLabel}>{t.applyCode}</label>\n//             <input\n//               type=\"number\"\n//               value={designInputs.applyCode}\n//               readOnly\n//               disabled\n//               style={readOnlyControlStyle}\n//             />\n//           </div>\n\n//           <div style={fieldWrapper}>\n//             <label style={fieldLabel}>{t.capacityRatio}</label>\n//             <input\n//               type=\"number\"\n//               value={designInputs.capacityUsageRatio}\n//               onChange={(e) =>\n//                 handleDesignInputChange(\n//                   \"capacityUsageRatio\",\n//                   Number(e.target.value)\n//                 )\n//               }\n//               style={controlStyle}\n//             />\n//           </div>\n\n//           <div style={fieldWrapper}>\n//             <label style={fieldLabel}>{t.serviceLevel}</label>\n//             <select\n//               value={designInputs.serviceLevelCode}\n//               onChange={(e) =>\n//                 handleDesignInputChange(\"serviceLevelCode\", e.target.value)\n//               }\n//               style={controlStyle}\n//             >\n//               {[\"A\", \"B\", \"C\", \"D\", \"E\", \"F\"].map((code) => (\n//                 <option key={code} value={code}>\n//                   {code}\n//                 </option>\n//               ))}\n//             </select>\n//           </div>\n//         </div>\n\n//         {/* Peak traffic block – full width, neatly labelled Jinju/Masan */}\n//         <div style={peakBlock}>\n//           <div style={{ marginBottom: 4, fontSize: 12, fontWeight: 500 }}>\n//             {t.peakTrafficHeader}\n//           </div>\n//           <div style={peakRow}>\n//             <span style={peakLabel}>{t.peakTrafficJinjuLabel}</span>\n//             <input\n//               type=\"number\"\n//               value={designInputs.peakTrafficJinju}\n//               onChange={(e) =>\n//                 handleDesignInputChange(\n//                   \"peakTrafficJinju\",\n//                   Number(e.target.value)\n//                 )\n//               }\n//               style={peakInput}\n//             />\n//             <span style={peakUnit}>{t.peakTrafficUnit}</span>\n//           </div>\n//           <div style={peakRow}>\n//             <span style={peakLabel}>{t.peakTrafficMasanLabel}</span>\n//             <input\n//               type=\"number\"\n//               value={designInputs.peakTrafficMasan}\n//               onChange={(e) =>\n//                 handleDesignInputChange(\n//                   \"peakTrafficMasan\",\n//                   Number(e.target.value)\n//                 )\n//               }\n//               style={peakInput}\n//             />\n//             <span style={peakUnit}>{t.peakTrafficUnit}</span>\n//           </div>\n//         </div>\n\n//         <p style={hintText}>\n//           {t.hintText({\n//             speed: designInputs.designSpeedKmH,\n//             capPerLane: baseCap,\n//             applyCode: designInputs.applyCode,\n//             ratio: designInputs.capacityUsageRatio\n//           })}\n//         </p>\n//       </section>\n\n//       {/* Direction 1 */}\n//       <section style={cardStyle}>\n//         <h2>{t.dir1Title}</h2>\n//         <SegmentsTableTransposed\n//           direction=\"MasanToJinju\"\n//           segments={segmentsMasanToJinju}\n//           onChange={handleSegmentChange}\n//           t={t}\n//         />\n//         <SummaryRow\n//           stats={statsMasanToJinju}\n//           traffic={trafficMasanToJinju}\n//           t={t}\n//         />\n//       </section>\n\n//       {/* Direction 2 */}\n//       <section style={cardStyle}>\n//         <h2>{t.dir2Title}</h2>\n//         <SegmentsTableTransposed\n//           direction=\"JinjuToMasan\"\n//           segments={segmentsJinjuToMasan}\n//           onChange={handleSegmentChange}\n//           t={t}\n//         />\n//         <SummaryRow\n//           stats={statsJinjuToMasan}\n//           traffic={trafficJinjuToMasan}\n//           t={t}\n//         />\n//       </section>\n//     </div>\n//   );\n// }\n\n// /* ====== segments table & summary ====== */\n\n// function SegmentsTableTransposed({ direction, segments, onChange, t }) {\n//   const colHeaders = Array.from({ length: SEGMENT_COUNT_PER_DIR }, (_, i) => i + 1);\n\n//   return (\n//     <table style={tableStyle}>\n//       <thead>\n//         <tr>\n//           <th style={thStyle}>{t.categoryCol}</th>\n//           {colHeaders.map((n) => (\n//             <th key={n} style={thStyle}>\n//               {t.sectionLabel(n)}\n//             </th>\n//           ))}\n//         </tr>\n//       </thead>\n//       <tbody>\n//         <tr>\n//           <th style={rowHeaderStyle}>{t.slopeRow}</th>\n//           {colHeaders.map((n, idx) => (\n//             <td key={n} style={tdStyle}>\n//               <NumberCellInput\n//                 value={segments[idx]?.slopePercent ?? \"\"}\n//                 onChange={(v) =>\n//                   onChange(direction, idx, \"slopePercent\", v)\n//                 }\n//               />\n//             </td>\n//           ))}\n//         </tr>\n//         <tr>\n//           <th style={rowHeaderStyle}>{t.lengthRow}</th>\n//           {colHeaders.map((n, idx) => (\n//             <td key={n} style={tdStyle}>\n//               <NumberCellInput\n//                 value={segments[idx]?.lengthM ?? \"\"}\n//                 onChange={(v) =>\n//                   onChange(direction, idx, \"lengthM\", v)\n//                 }\n//               />\n//             </td>\n//           ))}\n//         </tr>\n//         <tr>\n//           <th style={rowHeaderStyle}>{t.elevationRow}</th>\n//           {colHeaders.map((n, idx) => (\n//             <td key={n} style={tdStyle}>\n//               <NumberCellInput\n//                 value={segments[idx]?.avgElevationM ?? \"\"}\n//                 onChange={(v) =>\n//                   onChange(direction, idx, \"avgElevationM\", v)\n//                 }\n//               />\n//             </td>\n//           ))}\n//         </tr>\n//         <tr>\n//           <th style={rowHeaderStyle}>{t.lanesRow}</th>\n//           {colHeaders.map((n, idx) => (\n//             <td key={n} style={tdStyle}>\n//               <NumberCellInput\n//                 value={segments[idx]?.laneCount ?? \"\"}\n//                 onChange={(v) =>\n//                   onChange(direction, idx, \"laneCount\", v)\n//                 }\n//               />\n//             </td>\n//           ))}\n//         </tr>\n//       </tbody>\n//     </table>\n//   );\n// }\n\n// function SummaryRow({ stats, traffic, t }) {\n//   return (\n//     <div style={{ marginTop: 12, fontSize: 13 }}>\n//       {t.summaryText(\n//         stats.totalLengthM || 0,\n//         stats.lanes || 0,\n//         traffic.estimatedVolume || 0\n//       )}\n//     </div>\n//   );\n// }\n\n// function NumberCellInput({ value, onChange }) {\n//   return (\n//     <input\n//       type=\"number\"\n//       value={value}\n//       onChange={(e) => onChange(e.target.value)}\n//       style={cellInputStyle}\n//     />\n//   );\n// }\n\n// /* ====== styles ====== */\n\n// const cardStyle = {\n//   border: \"1px solid #ddd\",\n//   borderRadius: 8,\n//   padding: 16,\n//   marginBottom: 24,\n//   backgroundColor: \"#fff\"\n// };\n\n// // 4 columns for main global inputs – keeps boxes nicely aligned\n// const gridGlobal = {\n//   display: \"grid\",\n//   gridTemplateColumns: \"repeat(4, minmax(200px, 1fr))\",\n//   columnGap: 16,\n//   rowGap: 12,\n//   alignItems: \"flex-start\"\n// };\n\n// const fieldWrapper = {\n//   display: \"flex\",\n//   flexDirection: \"column\",\n//   gap: 4\n// };\n\n// const fieldLabel = {\n//   fontSize: 12,\n//   fontWeight: 500,\n//   color: \"#333\"\n// };\n\n// const controlStyle = {\n//   width: \"100%\",\n//   padding: \"6px 8px\",\n//   fontSize: 12,\n//   lineHeight: 1.4,\n//   boxSizing: \"border-box\",\n//   borderRadius: 4,\n//   border: \"1px solid #ccc\"\n// };\n\n// const readOnlyControlStyle = {\n//   ...controlStyle,\n//   backgroundColor: \"#f3f3f3\",\n//   color: \"#555\",\n//   cursor: \"not-allowed\"\n// };\n\n// // Peak-traffic mini-table\n// const peakBlock = {\n//   marginTop: 16,\n//   borderTop: \"1px dashed #ddd\",\n//   paddingTop: 8,\n//   maxWidth: 420\n// };\n\n// const peakRow = {\n//   display: \"grid\",\n//   gridTemplateColumns: \"80px 1fr 60px\",\n//   alignItems: \"center\",\n//   columnGap: 8,\n//   marginTop: 4\n// };\n\n// const peakLabel = {\n//   fontSize: 12,\n//   textAlign: \"left\"\n// };\n\n// const peakInput = {\n//   ...controlStyle,\n//   padding: \"4px 6px\"\n// };\n\n// const peakUnit = {\n//   fontSize: 12,\n//   textAlign: \"left\"\n// };\n\n// const tableStyle = {\n//   width: \"100%\",\n//   borderCollapse: \"collapse\",\n//   marginTop: 8,\n//   fontSize: 12\n// };\n\n// const thStyle = {\n//   borderBottom: \"1px solid #ccc\",\n//   padding: \"4px 6px\",\n//   textAlign: \"center\"\n// };\n\n// const rowHeaderStyle = {\n//   borderBottom: \"1px solid #eee\",\n//   padding: \"2px 4px\",\n//   textAlign: \"left\",\n//   background: \"#fafafa\",\n//   minWidth: 120\n// };\n\n// const tdStyle = {\n//   borderBottom: \"1px solid #eee\",\n//   padding: \"2px 4px\",\n//   textAlign: \"center\"\n// };\n\n// const cellInputStyle = {\n//   width: \"100%\",\n//   padding: \"2px 4px\",\n//   fontSize: 12,\n//   boxSizing: \"border-box\",\n//   borderRadius: 3,\n//   border: \"1px solid #ccc\"\n// };\n\n// const hintText = {\n//   marginTop: 8,\n//   fontSize: 11,\n//   color: \"#555\"\n// };","map":{"version":3,"names":["getModuleStrings","SUPPORTED_LANGS","LANGUAGE_LABELS","useLanguage"],"sources":["C:/Users/USER/sourcecodes/auto-excel/comp-engine/src/modules/designConditions/DesignConditionsForm.jsx"],"sourcesContent":["// BEFORE:\r\n// import {\r\n//   getDesignConditionsStrings,\r\n//   SUPPORTED_LANGS,\r\n//   LANGUAGE_LABELS\r\n// } from \"../../i18n/designConditionsStrings\";\r\n\r\n// AFTER:\r\nimport {\r\n  getModuleStrings,\r\n  SUPPORTED_LANGS,\r\n  LANGUAGE_LABELS\r\n} from \"../../i18n/appStrings\";\r\nimport { useLanguage } from \"../../i18n/LanguageContext\";\r\n\r\n\r\n// // src/modules/designConditions/DesignConditionsForm.jsx\r\n// import React, { useState } from \"react\";\r\n// import {\r\n//   computeDirectionStats,\r\n//   estimateTrafficVolume,\r\n//   SPEED_CAPACITY_TABLE\r\n// } from \"./calculations\";\r\n// import {\r\n//   getDesignConditionsStrings,\r\n//   SUPPORTED_LANGS,\r\n//   LANGUAGE_LABELS\r\n// } from \"../../i18n/designConditionsStrings\";\r\n\r\n// const EMPTY_SEGMENT = {\r\n//   slopePercent: \"\",\r\n//   lengthM: \"\",\r\n//   avgElevationM: \"\",\r\n//   laneCount: \"\"\r\n// };\r\n\r\n// const SEGMENT_COUNT_PER_DIR = 10;\r\n\r\n// // Excel-style mapping: IF(V=120,0.1, IF(V=100,0.2, IF(V=80,0.3)))\r\n// function defaultApplyCodeForSpeed(speed) {\r\n//   if (speed === 120) return 0.1;\r\n//   if (speed === 100) return 0.2;\r\n//   if (speed === 80) return 0.3;\r\n//   return 0.3;\r\n// }\r\n\r\n// export default function DesignConditionsForm() {\r\n//   // UI language\r\n//   const [lang, setLang] = useState(\"en\");\r\n//   const t = getDesignConditionsStrings(lang);\r\n\r\n//   // 10 segments per direction\r\n//   const [segmentsMasanToJinju, setSegmentsMasanToJinju] = useState(\r\n//     Array.from({ length: SEGMENT_COUNT_PER_DIR }, () => ({ ...EMPTY_SEGMENT }))\r\n//   );\r\n//   const [segmentsJinjuToMasan, setSegmentsJinjuToMasan] = useState(\r\n//     Array.from({ length: SEGMENT_COUNT_PER_DIR }, () => ({ ...EMPTY_SEGMENT }))\r\n//   );\r\n\r\n//   // Global design inputs\r\n//   const [designInputs, setDesignInputs] = useState({\r\n//     designSpeedKmH: 80,\r\n//     applyCode: defaultApplyCodeForSpeed(80),\r\n//     capacityUsageRatio: defaultApplyCodeForSpeed(80),\r\n//     serviceLevelCode: \"D\",\r\n//     peakTrafficJinju: 2200,\r\n//     peakTrafficMasan: 2200\r\n//   });\r\n\r\n//   const handleSegmentChange = (dir, index, field, value) => {\r\n//     const [segments, setter] =\r\n//       dir === \"MasanToJinju\"\r\n//         ? [segmentsMasanToJinju, setSegmentsMasanToJinju]\r\n//         : [segmentsJinjuToMasan, setSegmentsJinjuToMasan];\r\n\r\n//     const next = segments.map((seg, i) =>\r\n//       i === index ? { ...seg, [field]: value } : seg\r\n//     );\r\n//     setter(next);\r\n//   };\r\n\r\n//   const handleDesignSpeedChange = (speed) => {\r\n//     const s = Number(speed);\r\n//     const code = defaultApplyCodeForSpeed(s);\r\n//     setDesignInputs((prev) => ({\r\n//       ...prev,\r\n//       designSpeedKmH: s,\r\n//       applyCode: code,\r\n//       capacityUsageRatio: code\r\n//     }));\r\n//   };\r\n\r\n//   const handleDesignInputChange = (field, value) => {\r\n//     setDesignInputs((prev) => ({ ...prev, [field]: value }));\r\n//   };\r\n\r\n//   // ---- Calculations per direction ----\r\n//   const statsMasanToJinju = computeDirectionStats(segmentsMasanToJinju);\r\n//   const statsJinjuToMasan = computeDirectionStats(segmentsJinjuToMasan);\r\n\r\n//   const trafficMasanToJinju = estimateTrafficVolume({\r\n//     designSpeedKmH: designInputs.designSpeedKmH,\r\n//     capacityUsageRatio: designInputs.capacityUsageRatio,\r\n//     lanes: statsMasanToJinju.lanes\r\n//   });\r\n\r\n//   const trafficJinjuToMasan = estimateTrafficVolume({\r\n//     designSpeedKmH: designInputs.designSpeedKmH,\r\n//     capacityUsageRatio: designInputs.capacityUsageRatio,\r\n//     lanes: statsJinjuToMasan.lanes\r\n//   });\r\n\r\n//   const baseCap = SPEED_CAPACITY_TABLE[designInputs.designSpeedKmH];\r\n\r\n//   return (\r\n//     <div style={{ padding: 20, fontFamily: \"sans-serif\" }}>\r\n//       {/* Header: title left, language selector right */}\r\n//       <div\r\n//         style={{\r\n//           display: \"flex\",\r\n//           justifyContent: \"space-between\",\r\n//           alignItems: \"center\",\r\n//           marginBottom: 16\r\n//         }}\r\n//       >\r\n//         <h1 style={{ margin: 0, fontSize: 20 }}>{t.moduleTitle}</h1>\r\n\r\n//         <div style={{ minWidth: 200, textAlign: \"right\" }}>\r\n//           <label\r\n//             style={{\r\n//               ...fieldLabel,\r\n//               display: \"block\",\r\n//               marginBottom: 4,\r\n//               textAlign: \"right\"\r\n//             }}\r\n//           >\r\n//             {t.languageLabel}\r\n//           </label>\r\n//           <select\r\n//             value={lang}\r\n//             onChange={(e) => setLang(e.target.value)}\r\n//             style={controlStyle}\r\n//           >\r\n//             {SUPPORTED_LANGS.map((code) => (\r\n//               <option key={code} value={code}>\r\n//                 {LANGUAGE_LABELS[code] || code}\r\n//               </option>\r\n//             ))}\r\n//           </select>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* === GLOBAL DESIGN INPUTS === */}\r\n//       <section style={cardStyle}>\r\n//         <h2>{t.globalTitle}</h2>\r\n\r\n//         {/* 4-column grid for standard fields */}\r\n//         <div style={gridGlobal}>\r\n//           <div style={fieldWrapper}>\r\n//             <label style={fieldLabel}>{t.designSpeed}</label>\r\n//             <select\r\n//               value={designInputs.designSpeedKmH}\r\n//               onChange={(e) => handleDesignSpeedChange(Number(e.target.value))}\r\n//               style={controlStyle}\r\n//             >\r\n//               {Object.keys(SPEED_CAPACITY_TABLE).map((v) => (\r\n//                 <option key={v} value={v}>\r\n//                   {v}\r\n//                 </option>\r\n//               ))}\r\n//             </select>\r\n//           </div>\r\n\r\n//           <div style={fieldWrapper}>\r\n//             <label style={fieldLabel}>{t.applyCode}</label>\r\n//             <input\r\n//               type=\"number\"\r\n//               value={designInputs.applyCode}\r\n//               readOnly\r\n//               disabled\r\n//               style={readOnlyControlStyle}\r\n//             />\r\n//           </div>\r\n\r\n//           <div style={fieldWrapper}>\r\n//             <label style={fieldLabel}>{t.capacityRatio}</label>\r\n//             <input\r\n//               type=\"number\"\r\n//               value={designInputs.capacityUsageRatio}\r\n//               onChange={(e) =>\r\n//                 handleDesignInputChange(\r\n//                   \"capacityUsageRatio\",\r\n//                   Number(e.target.value)\r\n//                 )\r\n//               }\r\n//               style={controlStyle}\r\n//             />\r\n//           </div>\r\n\r\n//           <div style={fieldWrapper}>\r\n//             <label style={fieldLabel}>{t.serviceLevel}</label>\r\n//             <select\r\n//               value={designInputs.serviceLevelCode}\r\n//               onChange={(e) =>\r\n//                 handleDesignInputChange(\"serviceLevelCode\", e.target.value)\r\n//               }\r\n//               style={controlStyle}\r\n//             >\r\n//               {[\"A\", \"B\", \"C\", \"D\", \"E\", \"F\"].map((code) => (\r\n//                 <option key={code} value={code}>\r\n//                   {code}\r\n//                 </option>\r\n//               ))}\r\n//             </select>\r\n//           </div>\r\n//         </div>\r\n\r\n//         {/* Peak traffic block – full width, neatly labelled Jinju/Masan */}\r\n//         <div style={peakBlock}>\r\n//           <div style={{ marginBottom: 4, fontSize: 12, fontWeight: 500 }}>\r\n//             {t.peakTrafficHeader}\r\n//           </div>\r\n//           <div style={peakRow}>\r\n//             <span style={peakLabel}>{t.peakTrafficJinjuLabel}</span>\r\n//             <input\r\n//               type=\"number\"\r\n//               value={designInputs.peakTrafficJinju}\r\n//               onChange={(e) =>\r\n//                 handleDesignInputChange(\r\n//                   \"peakTrafficJinju\",\r\n//                   Number(e.target.value)\r\n//                 )\r\n//               }\r\n//               style={peakInput}\r\n//             />\r\n//             <span style={peakUnit}>{t.peakTrafficUnit}</span>\r\n//           </div>\r\n//           <div style={peakRow}>\r\n//             <span style={peakLabel}>{t.peakTrafficMasanLabel}</span>\r\n//             <input\r\n//               type=\"number\"\r\n//               value={designInputs.peakTrafficMasan}\r\n//               onChange={(e) =>\r\n//                 handleDesignInputChange(\r\n//                   \"peakTrafficMasan\",\r\n//                   Number(e.target.value)\r\n//                 )\r\n//               }\r\n//               style={peakInput}\r\n//             />\r\n//             <span style={peakUnit}>{t.peakTrafficUnit}</span>\r\n//           </div>\r\n//         </div>\r\n\r\n//         <p style={hintText}>\r\n//           {t.hintText({\r\n//             speed: designInputs.designSpeedKmH,\r\n//             capPerLane: baseCap,\r\n//             applyCode: designInputs.applyCode,\r\n//             ratio: designInputs.capacityUsageRatio\r\n//           })}\r\n//         </p>\r\n//       </section>\r\n\r\n//       {/* Direction 1 */}\r\n//       <section style={cardStyle}>\r\n//         <h2>{t.dir1Title}</h2>\r\n//         <SegmentsTableTransposed\r\n//           direction=\"MasanToJinju\"\r\n//           segments={segmentsMasanToJinju}\r\n//           onChange={handleSegmentChange}\r\n//           t={t}\r\n//         />\r\n//         <SummaryRow\r\n//           stats={statsMasanToJinju}\r\n//           traffic={trafficMasanToJinju}\r\n//           t={t}\r\n//         />\r\n//       </section>\r\n\r\n//       {/* Direction 2 */}\r\n//       <section style={cardStyle}>\r\n//         <h2>{t.dir2Title}</h2>\r\n//         <SegmentsTableTransposed\r\n//           direction=\"JinjuToMasan\"\r\n//           segments={segmentsJinjuToMasan}\r\n//           onChange={handleSegmentChange}\r\n//           t={t}\r\n//         />\r\n//         <SummaryRow\r\n//           stats={statsJinjuToMasan}\r\n//           traffic={trafficJinjuToMasan}\r\n//           t={t}\r\n//         />\r\n//       </section>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// /* ====== segments table & summary ====== */\r\n\r\n// function SegmentsTableTransposed({ direction, segments, onChange, t }) {\r\n//   const colHeaders = Array.from({ length: SEGMENT_COUNT_PER_DIR }, (_, i) => i + 1);\r\n\r\n//   return (\r\n//     <table style={tableStyle}>\r\n//       <thead>\r\n//         <tr>\r\n//           <th style={thStyle}>{t.categoryCol}</th>\r\n//           {colHeaders.map((n) => (\r\n//             <th key={n} style={thStyle}>\r\n//               {t.sectionLabel(n)}\r\n//             </th>\r\n//           ))}\r\n//         </tr>\r\n//       </thead>\r\n//       <tbody>\r\n//         <tr>\r\n//           <th style={rowHeaderStyle}>{t.slopeRow}</th>\r\n//           {colHeaders.map((n, idx) => (\r\n//             <td key={n} style={tdStyle}>\r\n//               <NumberCellInput\r\n//                 value={segments[idx]?.slopePercent ?? \"\"}\r\n//                 onChange={(v) =>\r\n//                   onChange(direction, idx, \"slopePercent\", v)\r\n//                 }\r\n//               />\r\n//             </td>\r\n//           ))}\r\n//         </tr>\r\n//         <tr>\r\n//           <th style={rowHeaderStyle}>{t.lengthRow}</th>\r\n//           {colHeaders.map((n, idx) => (\r\n//             <td key={n} style={tdStyle}>\r\n//               <NumberCellInput\r\n//                 value={segments[idx]?.lengthM ?? \"\"}\r\n//                 onChange={(v) =>\r\n//                   onChange(direction, idx, \"lengthM\", v)\r\n//                 }\r\n//               />\r\n//             </td>\r\n//           ))}\r\n//         </tr>\r\n//         <tr>\r\n//           <th style={rowHeaderStyle}>{t.elevationRow}</th>\r\n//           {colHeaders.map((n, idx) => (\r\n//             <td key={n} style={tdStyle}>\r\n//               <NumberCellInput\r\n//                 value={segments[idx]?.avgElevationM ?? \"\"}\r\n//                 onChange={(v) =>\r\n//                   onChange(direction, idx, \"avgElevationM\", v)\r\n//                 }\r\n//               />\r\n//             </td>\r\n//           ))}\r\n//         </tr>\r\n//         <tr>\r\n//           <th style={rowHeaderStyle}>{t.lanesRow}</th>\r\n//           {colHeaders.map((n, idx) => (\r\n//             <td key={n} style={tdStyle}>\r\n//               <NumberCellInput\r\n//                 value={segments[idx]?.laneCount ?? \"\"}\r\n//                 onChange={(v) =>\r\n//                   onChange(direction, idx, \"laneCount\", v)\r\n//                 }\r\n//               />\r\n//             </td>\r\n//           ))}\r\n//         </tr>\r\n//       </tbody>\r\n//     </table>\r\n//   );\r\n// }\r\n\r\n// function SummaryRow({ stats, traffic, t }) {\r\n//   return (\r\n//     <div style={{ marginTop: 12, fontSize: 13 }}>\r\n//       {t.summaryText(\r\n//         stats.totalLengthM || 0,\r\n//         stats.lanes || 0,\r\n//         traffic.estimatedVolume || 0\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function NumberCellInput({ value, onChange }) {\r\n//   return (\r\n//     <input\r\n//       type=\"number\"\r\n//       value={value}\r\n//       onChange={(e) => onChange(e.target.value)}\r\n//       style={cellInputStyle}\r\n//     />\r\n//   );\r\n// }\r\n\r\n// /* ====== styles ====== */\r\n\r\n// const cardStyle = {\r\n//   border: \"1px solid #ddd\",\r\n//   borderRadius: 8,\r\n//   padding: 16,\r\n//   marginBottom: 24,\r\n//   backgroundColor: \"#fff\"\r\n// };\r\n\r\n// // 4 columns for main global inputs – keeps boxes nicely aligned\r\n// const gridGlobal = {\r\n//   display: \"grid\",\r\n//   gridTemplateColumns: \"repeat(4, minmax(200px, 1fr))\",\r\n//   columnGap: 16,\r\n//   rowGap: 12,\r\n//   alignItems: \"flex-start\"\r\n// };\r\n\r\n// const fieldWrapper = {\r\n//   display: \"flex\",\r\n//   flexDirection: \"column\",\r\n//   gap: 4\r\n// };\r\n\r\n// const fieldLabel = {\r\n//   fontSize: 12,\r\n//   fontWeight: 500,\r\n//   color: \"#333\"\r\n// };\r\n\r\n// const controlStyle = {\r\n//   width: \"100%\",\r\n//   padding: \"6px 8px\",\r\n//   fontSize: 12,\r\n//   lineHeight: 1.4,\r\n//   boxSizing: \"border-box\",\r\n//   borderRadius: 4,\r\n//   border: \"1px solid #ccc\"\r\n// };\r\n\r\n// const readOnlyControlStyle = {\r\n//   ...controlStyle,\r\n//   backgroundColor: \"#f3f3f3\",\r\n//   color: \"#555\",\r\n//   cursor: \"not-allowed\"\r\n// };\r\n\r\n// // Peak-traffic mini-table\r\n// const peakBlock = {\r\n//   marginTop: 16,\r\n//   borderTop: \"1px dashed #ddd\",\r\n//   paddingTop: 8,\r\n//   maxWidth: 420\r\n// };\r\n\r\n// const peakRow = {\r\n//   display: \"grid\",\r\n//   gridTemplateColumns: \"80px 1fr 60px\",\r\n//   alignItems: \"center\",\r\n//   columnGap: 8,\r\n//   marginTop: 4\r\n// };\r\n\r\n// const peakLabel = {\r\n//   fontSize: 12,\r\n//   textAlign: \"left\"\r\n// };\r\n\r\n// const peakInput = {\r\n//   ...controlStyle,\r\n//   padding: \"4px 6px\"\r\n// };\r\n\r\n// const peakUnit = {\r\n//   fontSize: 12,\r\n//   textAlign: \"left\"\r\n// };\r\n\r\n// const tableStyle = {\r\n//   width: \"100%\",\r\n//   borderCollapse: \"collapse\",\r\n//   marginTop: 8,\r\n//   fontSize: 12\r\n// };\r\n\r\n// const thStyle = {\r\n//   borderBottom: \"1px solid #ccc\",\r\n//   padding: \"4px 6px\",\r\n//   textAlign: \"center\"\r\n// };\r\n\r\n// const rowHeaderStyle = {\r\n//   borderBottom: \"1px solid #eee\",\r\n//   padding: \"2px 4px\",\r\n//   textAlign: \"left\",\r\n//   background: \"#fafafa\",\r\n//   minWidth: 120\r\n// };\r\n\r\n// const tdStyle = {\r\n//   borderBottom: \"1px solid #eee\",\r\n//   padding: \"2px 4px\",\r\n//   textAlign: \"center\"\r\n// };\r\n\r\n// const cellInputStyle = {\r\n//   width: \"100%\",\r\n//   padding: \"2px 4px\",\r\n//   fontSize: 12,\r\n//   boxSizing: \"border-box\",\r\n//   borderRadius: 3,\r\n//   border: \"1px solid #ccc\"\r\n// };\r\n\r\n// const hintText = {\r\n//   marginTop: 8,\r\n//   fontSize: 11,\r\n//   color: \"#555\"\r\n// };\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SACEA,gBAAgB,EAChBC,eAAe,EACfC,eAAe,QACV,uBAAuB;AAC9B,SAASC,WAAW,QAAQ,4BAA4B;;AAGxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}