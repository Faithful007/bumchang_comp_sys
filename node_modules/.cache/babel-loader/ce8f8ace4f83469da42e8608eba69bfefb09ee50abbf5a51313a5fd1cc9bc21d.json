{"ast":null,"code":"// src/utils/speedGradeTables.js\n// Centralized registry and helpers for pollutant speed–grade f_iv tables.\n// Import JSON once here; use from anywhere via exported helpers.\n\nimport pmRaw from \"./pmSpeedGradeFiv.json\";\nimport coRaw from \"./coSpeedGradeFiv.json\";\nimport noxRaw from \"./noxSpeedGradeFiv.json\";\n\n// Normalize raw JSON formats into internal shape: { metadata: { speeds_kmh, grades_percent }, vehicle_classes: { key: { label_ko, fiv_table } } }\nfunction normalizeRaw(raw) {\n  if (!raw) return null;\n  // Already in internal shape\n  if (raw.metadata && raw.vehicle_classes) return raw;\n  // Structured catalog format: { base_speed_grade_tables: [ { title, grades, rows:[{speed_kmh, values:{grade:value}}] } ] }\n  if (raw.base_speed_grade_tables) {\n    const entries = raw.base_speed_grade_tables;\n    if (!entries.length) return null;\n    const grades = entries[0].grades.slice();\n    const speeds = entries[0].rows.map(r => r.speed_kmh);\n    const vehicle_classes = {};\n    entries.forEach(entry => {\n      const key = mapTitleToVehicleKey(entry.title);\n      const fiv_table = entry.rows.map(r => grades.map(g => r.values[String(g)]));\n      vehicle_classes[key] = {\n        label_ko: entry.title,\n        fiv_table\n      };\n    });\n    return {\n      metadata: {\n        speeds_kmh: speeds,\n        grades_percent: grades,\n        source: raw.sheet || \"sheet\"\n      },\n      vehicle_classes\n    };\n  }\n  return raw; // Fallback\n}\n\n// Runtime overrides (if user imports a custom table from data catalog)\nconst TABLE_OVERRIDES = {}; // pollutant => table object\n\n// Pollutant -> table mapping\nconst pmTable = normalizeRaw(pmRaw);\nconst coTable = normalizeRaw(coRaw);\nconst noxTable = normalizeRaw(noxRaw);\nexport const SPEED_GRADE_TABLES = Object.freeze({\n  PM: pmTable,\n  CO: coTable,\n  NOx: noxTable\n});\n\n// Canonical vehicle classes (keys should be the same across pollutants)\nexport const VEHICLE_CLASSES = Object.freeze([{\n  key: \"gasoline_passenger\",\n  label: \"휘발유 승용차\"\n}, {\n  key: \"diesel_passenger\",\n  label: \"경유 승용차\"\n}, {\n  key: \"small_bus_truck\",\n  label: \"소형버스·소형트럭\"\n}, {\n  key: \"large_bus_and_heavy_truck\",\n  label: \"대형버스·중형·대형·특수트럭\"\n}]);\nexport function getTable(pollutant) {\n  if (TABLE_OVERRIDES[pollutant]) return TABLE_OVERRIDES[pollutant];\n  const t = SPEED_GRADE_TABLES[pollutant];\n  if (!t) throw new Error(`Unknown pollutant table: ${pollutant}`);\n  return t;\n}\nexport function getSpeeds(pollutant) {\n  var _getTable$metadata;\n  return ((_getTable$metadata = getTable(pollutant).metadata) === null || _getTable$metadata === void 0 ? void 0 : _getTable$metadata.speeds_kmh) || [];\n}\nexport function getGrades(pollutant) {\n  var _getTable$metadata2;\n  return ((_getTable$metadata2 = getTable(pollutant).metadata) === null || _getTable$metadata2 === void 0 ? void 0 : _getTable$metadata2.grades_percent) || [];\n}\nexport function getVehicleClassesFromTable(pollutant) {\n  const tbl = getTable(pollutant);\n  return Object.keys(tbl.vehicle_classes || {});\n}\nexport function getFivGrid(pollutant, vehicleClassKey) {\n  var _tbl$vehicle_classes;\n  const tbl = getTable(pollutant);\n  const cls = (_tbl$vehicle_classes = tbl.vehicle_classes) === null || _tbl$vehicle_classes === void 0 ? void 0 : _tbl$vehicle_classes[vehicleClassKey];\n  if (!cls) throw new Error(`Unknown class ${vehicleClassKey} for ${pollutant}`);\n  return cls.fiv_table;\n}\n\n/**\r\n * Get f_iv value with speed snap + grade interpolation.\r\n * Matches Excel logic: nearest speed, linear interpolation on grade.\r\n * \r\n * @param {string} pollutant - \"PM\", \"CO\", or \"NOx\"\r\n * @param {string} vehicleClassKey - vehicle class key\r\n * @param {number} speedKmh - speed in km/h\r\n * @param {number} gradePercent - grade in %\r\n * @returns {number} f_iv correction factor\r\n */\nexport function getFivValue(pollutant, vehicleClassKey, speedKmh, gradePercent) {\n  const speeds = getSpeeds(pollutant);\n  const grades = getGrades(pollutant);\n  const grid = getFivGrid(pollutant, vehicleClassKey);\n  const v = Number(speedKmh);\n  const i = Number(gradePercent);\n  if (!Number.isFinite(v) || !Number.isFinite(i)) return NaN;\n\n  // Snap to nearest speed\n  let speedIdx = 0;\n  let minDist = Infinity;\n  speeds.forEach((s, idx) => {\n    const dist = Math.abs(v - s);\n    if (dist < minDist) {\n      minDist = dist;\n      speedIdx = idx;\n    }\n  });\n\n  // Interpolate grade\n  const iFloor = Math.floor(i);\n  const iCeil = iFloor + 1;\n  let colLow = grades.indexOf(iFloor);\n  let colHigh = grades.indexOf(iCeil);\n\n  // Clamp if out of range\n  if (colLow === -1) {\n    let best = 0;\n    grades.forEach((g, idx) => {\n      if (g <= i) best = idx;\n    });\n    colLow = best;\n  }\n  if (colHigh === -1) {\n    colHigh = Math.min(colLow + 1, grades.length - 1);\n  }\n  const fLow = grid[speedIdx][colLow];\n  const fHigh = grid[speedIdx][colHigh];\n  if (colLow === colHigh) return Number(fLow.toFixed(4));\n  const t = (i - grades[colLow]) / (grades[colHigh] - grades[colLow]);\n  const f = fLow + (fHigh - fLow) * t;\n  return Number(f.toFixed(4));\n}\n\n/**\r\n * Set a runtime override table for a pollutant.\r\n * @param {\"PM\"|\"CO\"|\"NOx\"} pollutant \r\n * @param {object} tableObject - must have metadata {speeds_kmh, grades_percent} and vehicle_classes mapping\r\n */\nexport function setTableOverride(pollutant, tableObject) {\n  TABLE_OVERRIDES[pollutant] = tableObject;\n}\n\n/** Clear an override for a pollutant. */\nexport function clearTableOverride(pollutant) {\n  delete TABLE_OVERRIDES[pollutant];\n}\n\n/** Map localized title to internal vehicle class key. */\nfunction mapTitleToVehicleKey(title = \"\") {\n  if (/휘발유/.test(title)) return \"gasoline_passenger\";\n  if (/경유/.test(title) && /승용차/.test(title)) return \"diesel_passenger\";\n  if (/소형버스|소형트럭/.test(title)) return \"small_bus_truck\";\n  if (/대형버스|중형트럭|대형트럭|특수트럭/.test(title)) return \"large_bus_and_heavy_truck\";\n  return title.replace(/[^a-z0-9_]+/gi, \"_\").toLowerCase();\n}\n\n/**\r\n * Build override table object from structured catalog JSON (utils/data/*.json).\r\n * Expected shape: { base_speed_grade_tables: [ { title, grades, rows:[{speed_kmh, values:{ grade: value }}] } ] }\r\n */\nexport function buildOverrideFromStructuredData(structuredJson) {\n  const entries = (structuredJson === null || structuredJson === void 0 ? void 0 : structuredJson.base_speed_grade_tables) || [];\n  if (!entries.length) throw new Error(\"Structured data missing base_speed_grade_tables\");\n  // Assume all entries share same grades and speeds.\n  const grades = entries[0].grades.slice();\n  // Collect speeds from first entry rows\n  const speeds = entries[0].rows.map(r => r.speed_kmh);\n  const vehicle_classes = {};\n  entries.forEach(entry => {\n    const key = mapTitleToVehicleKey(entry.title);\n    const fiv_table = entry.rows.map(r => grades.map(g => r.values[String(g)]));\n    vehicle_classes[key] = {\n      label_ko: entry.title,\n      fiv_table\n    };\n  });\n  return {\n    metadata: {\n      speeds_kmh: speeds,\n      grades_percent: grades,\n      source: structuredJson.sheet\n    },\n    vehicle_classes\n  };\n}","map":{"version":3,"names":["pmRaw","coRaw","noxRaw","normalizeRaw","raw","metadata","vehicle_classes","base_speed_grade_tables","entries","length","grades","slice","speeds","rows","map","r","speed_kmh","forEach","entry","key","mapTitleToVehicleKey","title","fiv_table","g","values","String","label_ko","speeds_kmh","grades_percent","source","sheet","TABLE_OVERRIDES","pmTable","coTable","noxTable","SPEED_GRADE_TABLES","Object","freeze","PM","CO","NOx","VEHICLE_CLASSES","label","getTable","pollutant","t","Error","getSpeeds","_getTable$metadata","getGrades","_getTable$metadata2","getVehicleClassesFromTable","tbl","keys","getFivGrid","vehicleClassKey","_tbl$vehicle_classes","cls","getFivValue","speedKmh","gradePercent","grid","v","Number","i","isFinite","NaN","speedIdx","minDist","Infinity","s","idx","dist","Math","abs","iFloor","floor","iCeil","colLow","indexOf","colHigh","best","min","fLow","fHigh","toFixed","f","setTableOverride","tableObject","clearTableOverride","test","replace","toLowerCase","buildOverrideFromStructuredData","structuredJson"],"sources":["C:/Users/USER/sourcecodes/auto-excel/comp-engine2/src/utils/speedGradeTables.js"],"sourcesContent":["// src/utils/speedGradeTables.js\r\n// Centralized registry and helpers for pollutant speed–grade f_iv tables.\r\n// Import JSON once here; use from anywhere via exported helpers.\r\n\r\nimport pmRaw from \"./pmSpeedGradeFiv.json\";\r\nimport coRaw from \"./coSpeedGradeFiv.json\";\r\nimport noxRaw from \"./noxSpeedGradeFiv.json\";\r\n\r\n// Normalize raw JSON formats into internal shape: { metadata: { speeds_kmh, grades_percent }, vehicle_classes: { key: { label_ko, fiv_table } } }\r\nfunction normalizeRaw(raw) {\r\n  if (!raw) return null;\r\n  // Already in internal shape\r\n  if (raw.metadata && raw.vehicle_classes) return raw;\r\n  // Structured catalog format: { base_speed_grade_tables: [ { title, grades, rows:[{speed_kmh, values:{grade:value}}] } ] }\r\n  if (raw.base_speed_grade_tables) {\r\n    const entries = raw.base_speed_grade_tables;\r\n    if (!entries.length) return null;\r\n    const grades = entries[0].grades.slice();\r\n    const speeds = entries[0].rows.map(r => r.speed_kmh);\r\n    const vehicle_classes = {};\r\n    entries.forEach(entry => {\r\n      const key = mapTitleToVehicleKey(entry.title);\r\n      const fiv_table = entry.rows.map(r => grades.map(g => r.values[String(g)]));\r\n      vehicle_classes[key] = { label_ko: entry.title, fiv_table };\r\n    });\r\n    return {\r\n      metadata: { speeds_kmh: speeds, grades_percent: grades, source: raw.sheet || \"sheet\" },\r\n      vehicle_classes\r\n    };\r\n  }\r\n  return raw; // Fallback\r\n}\r\n\r\n// Runtime overrides (if user imports a custom table from data catalog)\r\nconst TABLE_OVERRIDES = {}; // pollutant => table object\r\n\r\n// Pollutant -> table mapping\r\nconst pmTable = normalizeRaw(pmRaw);\r\nconst coTable = normalizeRaw(coRaw);\r\nconst noxTable = normalizeRaw(noxRaw);\r\n\r\nexport const SPEED_GRADE_TABLES = Object.freeze({ PM: pmTable, CO: coTable, NOx: noxTable });\r\n\r\n// Canonical vehicle classes (keys should be the same across pollutants)\r\nexport const VEHICLE_CLASSES = Object.freeze([\r\n  { key: \"gasoline_passenger\", label: \"휘발유 승용차\" },\r\n  { key: \"diesel_passenger\", label: \"경유 승용차\" },\r\n  { key: \"small_bus_truck\", label: \"소형버스·소형트럭\" },\r\n  { key: \"large_bus_and_heavy_truck\", label: \"대형버스·중형·대형·특수트럭\" }\r\n]);\r\n\r\nexport function getTable(pollutant) {\r\n  if (TABLE_OVERRIDES[pollutant]) return TABLE_OVERRIDES[pollutant];\r\n  const t = SPEED_GRADE_TABLES[pollutant];\r\n  if (!t) throw new Error(`Unknown pollutant table: ${pollutant}`);\r\n  return t;\r\n}\r\n\r\nexport function getSpeeds(pollutant) {\r\n  return getTable(pollutant).metadata?.speeds_kmh || [];\r\n}\r\n\r\nexport function getGrades(pollutant) {\r\n  return getTable(pollutant).metadata?.grades_percent || [];\r\n}\r\n\r\nexport function getVehicleClassesFromTable(pollutant) {\r\n  const tbl = getTable(pollutant);\r\n  return Object.keys(tbl.vehicle_classes || {});\r\n}\r\n\r\nexport function getFivGrid(pollutant, vehicleClassKey) {\r\n  const tbl = getTable(pollutant);\r\n  const cls = tbl.vehicle_classes?.[vehicleClassKey];\r\n  if (!cls) throw new Error(`Unknown class ${vehicleClassKey} for ${pollutant}`);\r\n  return cls.fiv_table;\r\n}\r\n\r\n/**\r\n * Get f_iv value with speed snap + grade interpolation.\r\n * Matches Excel logic: nearest speed, linear interpolation on grade.\r\n * \r\n * @param {string} pollutant - \"PM\", \"CO\", or \"NOx\"\r\n * @param {string} vehicleClassKey - vehicle class key\r\n * @param {number} speedKmh - speed in km/h\r\n * @param {number} gradePercent - grade in %\r\n * @returns {number} f_iv correction factor\r\n */\r\nexport function getFivValue(pollutant, vehicleClassKey, speedKmh, gradePercent) {\r\n  const speeds = getSpeeds(pollutant);\r\n  const grades = getGrades(pollutant);\r\n  const grid = getFivGrid(pollutant, vehicleClassKey);\r\n\r\n  const v = Number(speedKmh);\r\n  const i = Number(gradePercent);\r\n  \r\n  if (!Number.isFinite(v) || !Number.isFinite(i)) return NaN;\r\n\r\n  // Snap to nearest speed\r\n  let speedIdx = 0;\r\n  let minDist = Infinity;\r\n  speeds.forEach((s, idx) => {\r\n    const dist = Math.abs(v - s);\r\n    if (dist < minDist) {\r\n      minDist = dist;\r\n      speedIdx = idx;\r\n    }\r\n  });\r\n\r\n  // Interpolate grade\r\n  const iFloor = Math.floor(i);\r\n  const iCeil = iFloor + 1;\r\n\r\n  let colLow = grades.indexOf(iFloor);\r\n  let colHigh = grades.indexOf(iCeil);\r\n\r\n  // Clamp if out of range\r\n  if (colLow === -1) {\r\n    let best = 0;\r\n    grades.forEach((g, idx) => {\r\n      if (g <= i) best = idx;\r\n    });\r\n    colLow = best;\r\n  }\r\n  \r\n  if (colHigh === -1) {\r\n    colHigh = Math.min(colLow + 1, grades.length - 1);\r\n  }\r\n\r\n  const fLow = grid[speedIdx][colLow];\r\n  const fHigh = grid[speedIdx][colHigh];\r\n\r\n  if (colLow === colHigh) return Number(fLow.toFixed(4));\r\n\r\n  const t = (i - grades[colLow]) / (grades[colHigh] - grades[colLow]);\r\n  const f = fLow + (fHigh - fLow) * t;\r\n\r\n  return Number(f.toFixed(4));\r\n}\r\n\r\n/**\r\n * Set a runtime override table for a pollutant.\r\n * @param {\"PM\"|\"CO\"|\"NOx\"} pollutant \r\n * @param {object} tableObject - must have metadata {speeds_kmh, grades_percent} and vehicle_classes mapping\r\n */\r\nexport function setTableOverride(pollutant, tableObject) {\r\n  TABLE_OVERRIDES[pollutant] = tableObject;\r\n}\r\n\r\n/** Clear an override for a pollutant. */\r\nexport function clearTableOverride(pollutant) {\r\n  delete TABLE_OVERRIDES[pollutant];\r\n}\r\n\r\n/** Map localized title to internal vehicle class key. */\r\nfunction mapTitleToVehicleKey(title = \"\") {\r\n  if (/휘발유/.test(title)) return \"gasoline_passenger\";\r\n  if (/경유/.test(title) && /승용차/.test(title)) return \"diesel_passenger\";\r\n  if (/소형버스|소형트럭/.test(title)) return \"small_bus_truck\";\r\n  if (/대형버스|중형트럭|대형트럭|특수트럭/.test(title)) return \"large_bus_and_heavy_truck\";\r\n  return title.replace(/[^a-z0-9_]+/gi, \"_\").toLowerCase();\r\n}\r\n\r\n/**\r\n * Build override table object from structured catalog JSON (utils/data/*.json).\r\n * Expected shape: { base_speed_grade_tables: [ { title, grades, rows:[{speed_kmh, values:{ grade: value }}] } ] }\r\n */\r\nexport function buildOverrideFromStructuredData(structuredJson) {\r\n  const entries = structuredJson?.base_speed_grade_tables || [];\r\n  if (!entries.length) throw new Error(\"Structured data missing base_speed_grade_tables\");\r\n  // Assume all entries share same grades and speeds.\r\n  const grades = entries[0].grades.slice();\r\n  // Collect speeds from first entry rows\r\n  const speeds = entries[0].rows.map(r => r.speed_kmh);\r\n\r\n  const vehicle_classes = {};\r\n  entries.forEach(entry => {\r\n    const key = mapTitleToVehicleKey(entry.title);\r\n    const fiv_table = entry.rows.map(r => grades.map(g => r.values[String(g)]));\r\n    vehicle_classes[key] = { label_ko: entry.title, fiv_table };\r\n  });\r\n\r\n  return {\r\n    metadata: { speeds_kmh: speeds, grades_percent: grades, source: structuredJson.sheet },\r\n    vehicle_classes\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}