{"ast":null,"code":"// src/modules/smoke/smokeParameters.js\n//\n// Logic for sheet \"환기량 산정\", rows 91–106\n// 2. 매연(Smoke)에 대한 소요환기량 – 기본 파라미터\n//\n// Units:\n//   - q0: [m²/h·veh]\n//   - K_lim: [m⁻¹]\n\n/**\r\n * Row 101 – 감소계수 / reference speed\r\n * C101 = 75 (%), E101 = 41.3 (km/h)\r\n */\nexport const SMOKE_REDUCTION_FACTOR = 0.75; // 75 %\nexport const SMOKE_REFERENCE_SPEED_KMH = 41.3; // km/h\n\n/**\r\n * Rows 93–100 – 기준배출량 q0T  [m²/h·대]\r\n * (F93..F100 in the worksheet)\r\n *\r\n * These already include the 75% reduction factor and 41.3 km/h,\r\n * via Excel formulas like:\r\n *   F95 = ROUND(6.25 * D95 * (C101/100) * E101, 4)\r\n *   F97 = ROUND(6.25 * $E$98 * C97 * (C101/100) * 0.7355, 4)\r\n */\nexport const SMOKE_Q0_PER_VEHICLE = {\n  // 승용차\n  passengerGasoline: 0.0,\n  // row 93, F93\n  passengerDiesel: 0.0,\n  // row 94, F94 (=H641, evaluates to 0 in this workbook)\n\n  // 버스\n  busSmall: 0.8712,\n  // row 95, F95\n  busLarge: 7.7917,\n  // row 98, F98\n\n  // 트럭\n  truckSmall: 0.8712,\n  // row 96, F96\n  truckMedium: 3.8269,\n  // row 97, F97\n  truckLarge: 8.6191,\n  // row 99, F99\n  truckSpecial: 11.1532 // row 100, F100\n};\n\n/**\r\n * Helper to get q0 for a given internal vehicle key.\r\n * (You can map from your own keys in Module 2 → these keys.)\r\n */\nexport function getSmokeQ0ForVehicleType(typeKey) {\n  var _SMOKE_Q0_PER_VEHICLE;\n  return (_SMOKE_Q0_PER_VEHICLE = SMOKE_Q0_PER_VEHICLE[typeKey]) !== null && _SMOKE_Q0_PER_VEHICLE !== void 0 ? _SMOKE_Q0_PER_VEHICLE : 0;\n}\n\n/**\r\n * Rows 104–106 – 허용 매연농도 적용값 (K_lim⁻1)\r\n *\r\n * A104: \"속도 (km/h)\"\r\n * B104: \"V=10km/h\",  B105: \"이하\"   → speed ≤ 10\r\n * C104: \"V=20~40km/h\"              → 20–40\r\n * E104: \"V=50km/h\",  E105: \"이상\"   → speed ≥ 50\r\n *\r\n * A106: \"Klim-1\"\r\n * B106: 0.009, C106: 0.007, E106: 0.005\r\n */\n\nexport const SMOKE_K_LIM_RANGES = [{\n  min: -Infinity,\n  max: 10,\n  value: 0.009\n},\n// V ≤ 10 km/h\n{\n  min: 20,\n  max: 40,\n  value: 0.007\n},\n// 20 ≤ V ≤ 40 km/h\n{\n  min: 50,\n  max: +Infinity,\n  value: 0.005\n} // V ≥ 50 km/h\n];\n\n/**\r\n * Get K_lim⁻1 for a given speed (km/h) according to row 106 table.\r\n *\r\n * If the speed falls between defined ranges (e.g. 10–20, 40–50),\r\n * we use the closest matching category:\r\n *   - below 15 → treat as ≤10\r\n *   - 15–45   → treat as 20–40\r\n *   - above 45→ treat as ≥50\r\n */\nexport function getSmokeKLim(speedKmh) {\n  const v = Number(speedKmh);\n  if (!Number.isFinite(v)) return null;\n  if (v <= 10) return 0.009; // B106\n  if (v >= 50) return 0.005; // E106\n  // Everything in between uses the 20–40 category\n  return 0.007; // C106\n}\n\n/**\r\n * (Optional) If you want the exact Excel-style category name\r\n * for debugging or UI display.\r\n */\nexport function getSmokeKLimCategory(speedKmh) {\n  const v = Number(speedKmh);\n  if (!Number.isFinite(v)) return null;\n  if (v <= 10) return \"V ≤ 10 km/h\";\n  if (v >= 50) return \"V ≥ 50 km/h\";\n  return \"20 km/h ≤ V ≤ 40 km/h\";\n}","map":{"version":3,"names":["SMOKE_REDUCTION_FACTOR","SMOKE_REFERENCE_SPEED_KMH","SMOKE_Q0_PER_VEHICLE","passengerGasoline","passengerDiesel","busSmall","busLarge","truckSmall","truckMedium","truckLarge","truckSpecial","getSmokeQ0ForVehicleType","typeKey","_SMOKE_Q0_PER_VEHICLE","SMOKE_K_LIM_RANGES","min","Infinity","max","value","getSmokeKLim","speedKmh","v","Number","isFinite","getSmokeKLimCategory"],"sources":["C:/Users/USER/sourcecodes/auto-excel/comp-engine2/src/modules/smoke/smokeParameters.js"],"sourcesContent":["    // src/modules/smoke/smokeParameters.js\r\n//\r\n// Logic for sheet \"환기량 산정\", rows 91–106\r\n// 2. 매연(Smoke)에 대한 소요환기량 – 기본 파라미터\r\n//\r\n// Units:\r\n//   - q0: [m²/h·veh]\r\n//   - K_lim: [m⁻¹]\r\n\r\n/**\r\n * Row 101 – 감소계수 / reference speed\r\n * C101 = 75 (%), E101 = 41.3 (km/h)\r\n */\r\nexport const SMOKE_REDUCTION_FACTOR = 0.75;        // 75 %\r\nexport const SMOKE_REFERENCE_SPEED_KMH = 41.3;     // km/h\r\n\r\n/**\r\n * Rows 93–100 – 기준배출량 q0T  [m²/h·대]\r\n * (F93..F100 in the worksheet)\r\n *\r\n * These already include the 75% reduction factor and 41.3 km/h,\r\n * via Excel formulas like:\r\n *   F95 = ROUND(6.25 * D95 * (C101/100) * E101, 4)\r\n *   F97 = ROUND(6.25 * $E$98 * C97 * (C101/100) * 0.7355, 4)\r\n */\r\nexport const SMOKE_Q0_PER_VEHICLE = {\r\n  // 승용차\r\n  passengerGasoline: 0.0,       // row 93, F93\r\n  passengerDiesel: 0.0,         // row 94, F94 (=H641, evaluates to 0 in this workbook)\r\n\r\n  // 버스\r\n  busSmall: 0.8712,             // row 95, F95\r\n  busLarge: 7.7917,             // row 98, F98\r\n\r\n  // 트럭\r\n  truckSmall: 0.8712,           // row 96, F96\r\n  truckMedium: 3.8269,          // row 97, F97\r\n  truckLarge: 8.6191,           // row 99, F99\r\n  truckSpecial: 11.1532         // row 100, F100\r\n};\r\n\r\n/**\r\n * Helper to get q0 for a given internal vehicle key.\r\n * (You can map from your own keys in Module 2 → these keys.)\r\n */\r\nexport function getSmokeQ0ForVehicleType(typeKey) {\r\n  return SMOKE_Q0_PER_VEHICLE[typeKey] ?? 0;\r\n}\r\n\r\n/**\r\n * Rows 104–106 – 허용 매연농도 적용값 (K_lim⁻1)\r\n *\r\n * A104: \"속도 (km/h)\"\r\n * B104: \"V=10km/h\",  B105: \"이하\"   → speed ≤ 10\r\n * C104: \"V=20~40km/h\"              → 20–40\r\n * E104: \"V=50km/h\",  E105: \"이상\"   → speed ≥ 50\r\n *\r\n * A106: \"Klim-1\"\r\n * B106: 0.009, C106: 0.007, E106: 0.005\r\n */\r\n\r\nexport const SMOKE_K_LIM_RANGES = [\r\n  { min: -Infinity, max: 10,    value: 0.009 }, // V ≤ 10 km/h\r\n  { min: 20,        max: 40,    value: 0.007 }, // 20 ≤ V ≤ 40 km/h\r\n  { min: 50,        max: +Infinity, value: 0.005 } // V ≥ 50 km/h\r\n];\r\n\r\n/**\r\n * Get K_lim⁻1 for a given speed (km/h) according to row 106 table.\r\n *\r\n * If the speed falls between defined ranges (e.g. 10–20, 40–50),\r\n * we use the closest matching category:\r\n *   - below 15 → treat as ≤10\r\n *   - 15–45   → treat as 20–40\r\n *   - above 45→ treat as ≥50\r\n */\r\nexport function getSmokeKLim(speedKmh) {\r\n  const v = Number(speedKmh);\r\n\r\n  if (!Number.isFinite(v)) return null;\r\n\r\n  if (v <= 10) return 0.009;           // B106\r\n  if (v >= 50) return 0.005;           // E106\r\n  // Everything in between uses the 20–40 category\r\n  return 0.007;                        // C106\r\n}\r\n\r\n/**\r\n * (Optional) If you want the exact Excel-style category name\r\n * for debugging or UI display.\r\n */\r\nexport function getSmokeKLimCategory(speedKmh) {\r\n  const v = Number(speedKmh);\r\n  if (!Number.isFinite(v)) return null;\r\n  if (v <= 10) return \"V ≤ 10 km/h\";\r\n  if (v >= 50) return \"V ≥ 50 km/h\";\r\n  return \"20 km/h ≤ V ≤ 40 km/h\";\r\n}\r\n"],"mappings":"AAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO,MAAMA,sBAAsB,GAAG,IAAI,CAAC,CAAQ;AACnD,OAAO,MAAMC,yBAAyB,GAAG,IAAI,CAAC,CAAK;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,oBAAoB,GAAG;EAClC;EACAC,iBAAiB,EAAE,GAAG;EAAQ;EAC9BC,eAAe,EAAE,GAAG;EAAU;;EAE9B;EACAC,QAAQ,EAAE,MAAM;EAAc;EAC9BC,QAAQ,EAAE,MAAM;EAAc;;EAE9B;EACAC,UAAU,EAAE,MAAM;EAAY;EAC9BC,WAAW,EAAE,MAAM;EAAW;EAC9BC,UAAU,EAAE,MAAM;EAAY;EAC9BC,YAAY,EAAE,OAAO,CAAS;AAChC,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,SAASC,wBAAwBA,CAACC,OAAO,EAAE;EAAA,IAAAC,qBAAA;EAChD,QAAAA,qBAAA,GAAOX,oBAAoB,CAACU,OAAO,CAAC,cAAAC,qBAAA,cAAAA,qBAAA,GAAI,CAAC;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,kBAAkB,GAAG,CAChC;EAAEC,GAAG,EAAE,CAACC,QAAQ;EAAEC,GAAG,EAAE,EAAE;EAAKC,KAAK,EAAE;AAAM,CAAC;AAAE;AAC9C;EAAEH,GAAG,EAAE,EAAE;EAASE,GAAG,EAAE,EAAE;EAAKC,KAAK,EAAE;AAAM,CAAC;AAAE;AAC9C;EAAEH,GAAG,EAAE,EAAE;EAASE,GAAG,EAAE,CAACD,QAAQ;EAAEE,KAAK,EAAE;AAAM,CAAC,CAAC;AAAA,CAClD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAACC,QAAQ,EAAE;EACrC,MAAMC,CAAC,GAAGC,MAAM,CAACF,QAAQ,CAAC;EAE1B,IAAI,CAACE,MAAM,CAACC,QAAQ,CAACF,CAAC,CAAC,EAAE,OAAO,IAAI;EAEpC,IAAIA,CAAC,IAAI,EAAE,EAAE,OAAO,KAAK,CAAC,CAAW;EACrC,IAAIA,CAAC,IAAI,EAAE,EAAE,OAAO,KAAK,CAAC,CAAW;EACrC;EACA,OAAO,KAAK,CAAC,CAAwB;AACvC;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASG,oBAAoBA,CAACJ,QAAQ,EAAE;EAC7C,MAAMC,CAAC,GAAGC,MAAM,CAACF,QAAQ,CAAC;EAC1B,IAAI,CAACE,MAAM,CAACC,QAAQ,CAACF,CAAC,CAAC,EAAE,OAAO,IAAI;EACpC,IAAIA,CAAC,IAAI,EAAE,EAAE,OAAO,aAAa;EACjC,IAAIA,CAAC,IAAI,EAAE,EAAE,OAAO,aAAa;EACjC,OAAO,uBAAuB;AAChC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}